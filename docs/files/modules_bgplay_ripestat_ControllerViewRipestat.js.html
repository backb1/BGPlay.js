<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>modules\bgplay_ripestat\ControllerViewRipestat.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/BgpDataChecksView.html">BgpDataChecksView</a></li>
            
                <li><a href="..&#x2F;classes/Bgplay.html">Bgplay</a></li>
            
                <li><a href="..&#x2F;classes/Cluster.html">Cluster</a></li>
            
                <li><a href="..&#x2F;classes/ControllerQuerySimpleView.html">ControllerQuerySimpleView</a></li>
            
                <li><a href="..&#x2F;classes/ControllerView.html">ControllerView</a></li>
            
                <li><a href="..&#x2F;classes/Event.html">Event</a></li>
            
                <li><a href="..&#x2F;classes/GraphView.html">GraphView</a></li>
            
                <li><a href="..&#x2F;classes/InfoPanelView.html">InfoPanelView</a></li>
            
                <li><a href="..&#x2F;classes/Instant.html">Instant</a></li>
            
                <li><a href="..&#x2F;classes/JsonWrapGeneric.html">JsonWrapGeneric</a></li>
            
                <li><a href="..&#x2F;classes/JsonWrapRipestat.html">JsonWrapRipestat</a></li>
            
                <li><a href="..&#x2F;classes/JsonWrapTraceroutes.html">JsonWrapTraceroutes</a></li>
            
                <li><a href="..&#x2F;classes/LegendView.html">LegendView</a></li>
            
                <li><a href="..&#x2F;classes/MainView.html">MainView</a></li>
            
                <li><a href="..&#x2F;classes/Node.html">Node</a></li>
            
                <li><a href="..&#x2F;classes/NodePositionView.html">NodePositionView</a></li>
            
                <li><a href="..&#x2F;classes/NodeView.html">NodeView</a></li>
            
                <li><a href="..&#x2F;classes/OptionAnimationSpeedView.html">OptionAnimationSpeedView</a></li>
            
                <li><a href="..&#x2F;classes/OptionPopupView.html">OptionPopupView</a></li>
            
                <li><a href="..&#x2F;classes/Path.html">Path</a></li>
            
                <li><a href="..&#x2F;classes/PathView.html">PathView</a></li>
            
                <li><a href="..&#x2F;classes/Source.html">Source</a></li>
            
                <li><a href="..&#x2F;classes/Target.html">Target</a></li>
            
                <li><a href="..&#x2F;classes/TimelineView.html">TimelineView</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/model.html">model</a></li>
            
                <li><a href="..&#x2F;modules/modules.html">modules</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: modules\bgplay_ripestat\ControllerViewRipestat.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;*
 * BGPlay.js
 * Copyright (c) 2013 Massimo Candela, Giuseppe Di Battista, Claudio Squarcella, Roma Tre University and RIPE NCC
 * http:&#x2F;&#x2F;www.bgplayjs.com
 *
 * See the file LICENSE.txt for copying permission.
 *&#x2F;

&#x2F;**
 * This is a module specific for BGP.
 * It provides the query form.
 * Template: controller.html
 * @class ControllerView
 * @module modules
 *&#x2F;
var ControllerView=Backbone.View.extend({
    events:function(){
        return {
            &quot;click .bgplayControlAnimationStart&quot;:&quot;toggle&quot;,
            &quot;click .bgplayControlAnimationPause&quot;:&quot;toggle&quot;,
            &quot;click .bgplayControlAnimationRepeat&quot;:&quot;repeat&quot;,
            &quot;click .bgplayControlAnimationStop&quot;:&quot;stopButton&quot;,
            &quot;click .bgplayControlAnimationPrev&quot;:&quot;previousEvent&quot;,
            &quot;click .bgplayControlAnimationNext&quot;:&quot;nextEvent&quot;,
            &quot;mouseover .bgplayControlPanelDivFlagIco&quot;:&quot;mouseOverFlag&quot;,
            &quot;mouseout .bgplayControlPanelDivFlagIco&quot;:&quot;mouseOutFlag&quot;,
            &quot;click .bgplayControlPanelDivFlagIco&quot;:&quot;clickOnFlag&quot;,
            &quot;change input[name=bgplayControlPrefixValues]&quot;:&quot;validateIp&quot;,
            &quot;click .bgplayControlDiscardButton&quot;:&quot;discardConfig&quot;,
            &quot;click .bgplayControlApplyButton&quot;:&quot;updateConfig&quot;,
            &quot;click .bgplayControlPrefixMore&quot;:&quot;morePrefixTextbox&quot;,
            &quot;click .bgplayControlPrefixDelete&quot;:&quot;lessPrefixTextbox&quot;
        }
    },

    &#x2F;**
     * The initialization method of this object.
     * @method initialize
     * @param {Map} A map of parameters
     *&#x2F;
    initialize:function(){
        this.environment=this.options.environment;
        this.bgplay=this.environment.bgplay;
        this.fileRoot=this.environment.fileRoot;
        this.imageRoot = this.environment.imageRoot;
        this.eventAggregator=this.environment.eventAggregator;


        this.animation=false;
        this.allEvents=this.bgplay.get(&quot;allEvents&quot;);

        this.prefixes=stringToArray(this.environment.params.targets);
        this.selectedRrcs=stringToArray(this.environment.params.selectedRrcs);

        this.selectableRrcs=this.environment.config.selectableRrcs;
        this.possibleRrcs=removeSubArray(this.environment.config.possibleRrcs,this.selectedRrcs);

        this.slideOpened=false;
        this.showResourceController = this.environment.params.showResourceController;

        this.ignoreReannouncements= this.environment.params.ignoreReannouncements || this.environment.config.ignoreReannouncementsByDefault;
        this.releasedPlayButton=true;
        this.environment.dynamicParams.push(&#x27;instant&#x27;);
        this.startAnimationInstant=new Instant({id:0, timestamp:this.bgplay.get(&quot;starttimestamp&quot;)});
        this.stopAnimationInstant=new Instant({id:0, timestamp:this.bgplay.get(&quot;endtimestamp&quot;)});

        this.eventAggregator.on(&quot;destroyAll&quot;, function(){
            this.destroyMe();
        },this);

        this.bgplay.on(&quot;change:cur_instant&quot;,function(){
            if (this.environment.config.controller.keepTrackCurrentInstant==true){
                var instant = this.bgplay.get(&quot;cur_instant&quot;);
                this.environment.params.instant = instant.toString();
                &#x2F;&#x2F;this.environment.jsonWrap.setParams(this.environment.params);
                &#x2F;&#x2F;this.environment.thisWidget.navigate();
                &#x2F;&#x2F;this.environment.jsonWrap.setParams(this.environment.params);

                &#x2F;*
                 try{
                 if (this.environment.paramsInUrl==true &amp;&amp; this.environment.instances==1){
                 &#x2F;&#x2F;setUrlParam(&#x27;instant&#x27;,instant.toString(),false);
                 &#x2F;&#x2F;window.history.replaceState({&quot;html&quot;:this.bgplay.html,&quot;pageTitle&quot;:&#x27;BGPlayjs&#x27;},&quot;&quot;, currentUrl);
                 }
                 }catch(e){
                 log(&quot;This browser does not support the replaceState function.&quot;);
                 }
                 *&#x2F;
            }
        },this);

        this.eventAggregator.trigger(&quot;autoStartFunction&quot;,
            {func:
                          function(){
                              var initialInstant, id, timestamp;
                              initialInstant = this.environment.params.instant || getUrlParam(&quot;instant&quot;);
                              if (initialInstant != null &amp;&amp; initialInstant!=&quot;&quot; &amp;&amp; this.environment.instances==1){
                                  initialInstant = initialInstant.split(&#x27;,&#x27;);
                                  id = initialInstant[0];
                                  timestamp = initialInstant[1];
                                  if (id!=null &amp;&amp; timestamp!=null &amp;&amp; id == parseInt(id) &amp;&amp; timestamp == parseInt(timestamp)){
                                      this.bgplay.set({&quot;cur_instant&quot;:new Instant({id:id, timestamp:timestamp})});
                                  }
                              }
                          }
                , context:this});

        this.eventAggregator.on(&quot;animationEnd&quot;, function(){
            this.stop();
        },this);

        this.eventAggregator.on(&quot;animationReload&quot;, function(){
            this.reload();
        },this);

        this.eventAggregator.on(&quot;newSelectionStart&quot;, function(value){
            this.startAnimationInstant=value;
        },this);

        this.eventAggregator.on(&quot;releasePlayButton&quot;, function(release){
            this.releasedPlayButton=release;
            if (this.releasedPlayButton==true){
                this.controlAnimationStartPauseDiv.css(&#x27;cursor&#x27;,&#x27;auto&#x27;);
            }else{
                this.controlAnimationStartPauseDiv.css(&#x27;cursor&#x27;,&#x27;wait&#x27;);
            }
        },this);

        this.eventAggregator.on(&quot;newSelectionEnd&quot;, function(value){
            this.stopAnimationInstant=value;
        },this);

        var $this = this;
        $(&#x27;body&#x27;).keydown(function(evt){
            if ((evt.ctrlKey || evt.shiftKey) &amp;&amp; !$this.animation){
                $this.repeatLastEvent = true;
                $this.update();
            }
        }).keyup(function(evt){
                $this.repeatLastEvent = false;
                $this.update();
            });

        this.render();
        log(&quot;Controller view loaded.&quot;);
        this.eventAggregator.trigger(&quot;moduleLoaded&quot;, this);
    },

    &#x2F;*
     * This method creates the pointers to the DOM elements.
     *&#x2F;
    getDomElements:function(){
        this.dom = this.$el;
        this.controlAnimationStartPauseDiv = this.dom.find(&#x27;.bgplayControlAnimationStartPause&#x27;);
        this.controlAnimationStart = this.controlAnimationStartPauseDiv.find(&#x27;.bgplayControlAnimationStart&#x27;);
        this.controlAnimationPause = this.controlAnimationStartPauseDiv.find(&#x27;.bgplayControlAnimationPause&#x27;);
        this.controlAnimationRepeatEvent = this.controlAnimationStartPauseDiv.find(&#x27;.bgplayControlAnimationRepeat&#x27;);

        this.controlAnimationStop = this.dom.find(&#x27;.bgplayControlAnimationStop&#x27;);
        this.controlAnimationNext = this.dom.find(&#x27;.bgplayControlAnimationNext&#x27;);
        this.controlAnimationPrevImage = this.dom.find(&#x27;.bgplayControlAnimationPrev img&#x27;);
        this.controlPrefixDiv = this.dom.find(&#x27;.bgplayControlPrefixDiv&#x27;);
        this.starttimestampPicker = this.dom.find(&#x27;.bgplayStarttimestampPicker&#x27;);
        this.endtimestampPicker = this.dom.find(&#x27;.bgplayEndtimestampPicker&#x27;);
        this.controlPanelDivFlagIco = this.dom.find(&#x27;.bgplayControlPanelDivFlagIco&#x27;);
        this.controlPanelDivComplete = this.dom.find(&#x27;.bgplayControlPanelDivComplete&#x27;);
        this.suppressReannounce = this.dom.find(&#x27;.bgplaySuppressReannounce&#x27;);
    },

    &#x2F;**
     * This method draws this module (eg. inject the DOM and elements).
     * @method render
     *&#x2F;
    render:function(){
        parseTemplate(this.environment,&#x27;controller.html&#x27;,this,this.el);
        this.getDomElements();
        this.dom.show();
        this.update();
        if (this.controlPrefixDiv.length&gt;0)
            this.controlPrefixDiv.tinyscrollbar({axis:&#x27;y&#x27;});

        this.starttimestampPicker.datetimepicker({
            changeMonth: true,
            changeYear: true,
            hideIfNoPrevNext:true,
            timeFormat:&#x27;HH:mm:ss&#x27;,
            separator:&#x27; &#x27;,
            dateFormat:&#x27;yy-mm-dd&#x27;,
            showSecond: true,
            maxDate: &quot;+0&quot;

        });

        this.starttimestampPicker.datetimepicker(&quot;setDate&quot;, dateToUTC(this.bgplay.get(&quot;starttimestamp&quot;)));

        this.endtimestampPicker.datetimepicker({
            changeMonth: true,
            changeYear: true,
            hideIfNoPrevNext:true,
            timeFormat:&#x27;HH:mm:ss&#x27;,
            separator:&#x27; &#x27;,
            dateFormat:&#x27;yy-mm-dd&#x27;,
            showSecond: true,
            maxDate: &quot;+0&quot;
        });

        this.endtimestampPicker.datetimepicker(&quot;setDate&quot;, dateToUTC(this.bgplay.get(&quot;endtimestamp&quot;)));

        return this;
    },

    &#x2F;**
     * This method updates the DOM of the Control Panel without render it again.
     * @method update
     *&#x2F;
    update:function(){
        if (this.animation==true){
            this.controlAnimationPrevImage.hide();
            this.controlAnimationNext.hide();
            this.controlAnimationStart.hide();

            this.controlAnimationPause.show();
            this.controlAnimationStop.show();

            this.controlAnimationRepeatEvent.hide();
        }else{
            this.controlAnimationStop.hide();
            this.controlAnimationPause.hide();

            if (!this.repeatLastEvent){
                this.controlAnimationStart.show();
                this.controlAnimationRepeatEvent.hide();
            }else{
                this.controlAnimationStart.hide();
                this.controlAnimationRepeatEvent.show();
            }

            this.controlAnimationPrevImage.show();
            this.controlAnimationNext.show();
        }
    },

    &#x2F;**
     * If this method is invoked during an animation then the animation pauses otherwise the animation starts.
     * @method toggle
     *&#x2F;
    toggle:function(){
        if (!this.releasedPlayButton){
            return;
        }

        this.closeFlag();
        if (this.bgplay.get(&quot;cur_instant&quot;).get(&quot;timestamp&quot;) &lt; this.stopAnimationInstant.get(&quot;timestamp&quot;)){
            this.animation=!this.animation;
            this.update();
            this.eventAggregator.trigger(&quot;animate&quot;, this.animation);
        }
    },

    &#x2F;**
     * This method reloads the animation.
     * @method reload
     *&#x2F;
    reload:function(){
        this.bgplay.setCurInstant(this.startAnimationInstant);
        this.eventAggregator.trigger(&quot;checkPathPosition&quot;);
    },

    &#x2F;**
     * This method repeats the last one event.
     * @method repeat
     *&#x2F;
    repeat:function(){
        var isInitial;
        this.eventAggregator.trigger(&quot;animateNextEvent&quot;, false);
        isInitial = (this.previousEvent() == false);
        this.eventAggregator.trigger(&quot;animateNextEvent&quot;, true);
        if (!isInitial){
            this.nextEvent();
        }
    },

    &#x2F;**
     * This method stops and reloads the animation.
     * @method stopButton
     *&#x2F;
    stopButton:function(){
        this.stop();
        this.reload();
    },

    &#x2F;**
     * This method stops the animation.
     * @method stop
     *&#x2F;
    stop:function(){
        this.animation=false;
        this.eventAggregator.trigger(&quot;animate&quot;, false);
        this.update();
    },

    &#x2F;**
     * This method applies the previous event.
     * @method previousEvent
     *&#x2F;
    previousEvent:function(){
        var prevInstant, prevEvent, instant;
        instant = this.bgplay.get(&quot;cur_instant&quot;);
        prevEvent = this.allEvents.nearest(instant,false,false);
        if (prevEvent!=null){
            prevInstant = prevEvent.get(&quot;instant&quot;);
            if (!this.environment.config.controller.disableNotSelectedInstants || this.allEvents.compare(prevInstant,this.startAnimationInstant)&gt;=0){
                this.bgplay.setCurInstant(prevInstant);
            }
        }else{
            return false;
        }
    },

    &#x2F;**
     * This method applies the next event.
     * @method nextEvent
     *&#x2F;
    nextEvent:function(){
        var nextInstant, nextEvent, instant;
        instant = this.bgplay.get(&quot;cur_instant&quot;);
        nextEvent = this.allEvents.nearest(instant,true,false);
        if (nextEvent!=null){
            nextInstant = nextEvent.get(&quot;instant&quot;);
            if (!this.environment.config.controller.disableNotSelectedInstants || this.allEvents.compare(nextInstant,this.stopAnimationInstant)&lt;=0){
                this.bgplay.setCurInstant(nextInstant);
            }
        }
    },

    &#x2F;**
     * This method validates an IP&#x2F;prefix inserted in the query form.
     * @method validateIp
     * @return {Boolean} True if the given IP is valid
     *&#x2F;
    validateIp:function(){
        var out, val, $this;
        out=true;
        $this=this;
        this.dom.find(&quot;input[name=bgplayControlPrefixValues]&quot;).each(function(){
            val=$(this).val();
            if (! (validateIpv4and6Prefix(val) || validateIpv4and6Address(val) || validateAS(val))){
                $this.environment.cssAlert.alert(&#x27;Malformed prefix&#x2F;ip&#x2F;AS.&lt;br&#x2F;&gt;A valid ip for ipv4 or ipv6 possibly with netmask is required. You can also use AS numbers (be careful).&#x27;,&#x27;validation&#x27;);
                out=false;
            }
        });
        return out;
    },

    &#x2F;**
     * This method validates the query form.
     * @method validateAll
     * @return {Boolean} True if the data inserted in the query form is valid
     *&#x2F;
    validateAll:function(){
        &#x2F;&#x2F;A trick to solve a bug of the timepicker add-on (I&#x27;m triggering a keyUp to force the update of the date)
        this.starttimestampPicker.keyup();
        this.endtimestampPicker.keyup();

        return (this.validateIp() || !this.showResourceController) &amp;&amp; this.validateInterval() &amp;&amp; this.validateRrcs();
    },

    &#x2F;**
     * This method validates the time interval.
     * @method validateInterval
     * @return {Boolean} True if the time interval is valid
     *&#x2F;
    validateInterval:function(){
        if (this.starttimestampPicker.datepicker(&quot;getDate&quot;).getTime()&gt;this.endtimestampPicker.datepicker(&quot;getDate&quot;).getTime()){
            this.environment.cssAlert.alert(&quot;The end date is before the start date.&lt;br&#x2F;&gt;Wait a minute, Doc. Ah... Are you telling me that you built a time machine... out of a DeLorean?&quot;,&quot;validation&quot;);
            return false;
        }
        return true;
    },

    &#x2F;**
     * This method validates a set of route collectors
     * @method validateRrcs
     * @return {Boolean} True if the set of RRCs is valid
     *&#x2F;
    validateRrcs:function(){
        if (this.selectableRrcs){
            var rrcSelected=[];
            this.dom.find(&#x27;input[name=bgplayRrcSelect]:checked&#x27;).each(function(){
                rrcSelected.push($(this).val());
            });
            if (rrcSelected.length==0){
                this.environment.cssAlert.alert(&quot;You must select at least one rrc.&quot;,&quot;validation&quot;);
                return false;
            }
        }
        return true;

    },
    mouseOverFlag:function(){
        if (this.slideOpened==false)
            this.controlPanelDivFlagIco.attr(&#x27;src&#x27;, this.imageRoot + &#x27;openSlide.png&#x27;);
    },
    mouseOutFlag:function(){
        if (this.slideOpened==false)
            this.controlPanelDivFlagIco.attr(&#x27;src&#x27;, this.imageRoot + &#x27;config.png&#x27;);
    },
    clickOnFlag:function(){
        if (this.slideOpened==false){
            this.openFlag();
        }else{
            this.discardConfig();
        }
    },
    openFlag:function(){
        if (this.slideOpened==false){
            var $this=this;
            this.dom.animate({height:&#x27;+=340&#x27;}, 600, function() {
                $this.dom.animate({width:&#x27;+=150&#x27;},300,function(){
                    $this.controlPanelDivComplete.show();
                    $this.controlPanelDivFlagIco.attr(&#x27;src&#x27;, $this.imageRoot + &#x27;closeSlide.png&#x27;);
                    if ($this.controlPrefixDiv.length&gt;0)
                        $this.controlPrefixDiv.tinyscrollbar_update();
                });
            });
            this.slideOpened=true;
        }
    },
    closeFlag:function(){
        if (this.slideOpened==true){
            var $this=this;
            this.controlPanelDivComplete.hide();
            this.dom.animate({height:&#x27;-=340&#x27;}, 600, function() {
                $this.dom.animate({width:&#x27;-=150&#x27;},300,function(){
                    $this.controlPanelDivFlagIco.attr(&#x27;src&#x27;, $this.imageRoot + &#x27;config.png&#x27;);
                });
            });
            this.slideOpened=false;
        }
    },
    morePrefixTextbox:function(){
        var element=this.dom.find(&quot;.bgplayControlPrefixValue&gt;div&gt;div&quot;).first();
        var parent=element.parent();
        element.clone().appendTo(parent).find(&#x27;input&#x27;).val(&quot;&quot;);
        if (this.controlPrefixDiv.length&gt;0)
            this.controlPrefixDiv.tinyscrollbar_update(&#x27;bottom&#x27;);
    },
    lessPrefixTextbox:function(event){
        var element=$(event.target);
        if (this.dom.find(&quot;.bgplayControlPrefixValue&gt;div&gt;div&quot;).length&gt;1){
            element.parent().remove();
            if (this.controlPrefixDiv.length&gt;0)
                this.controlPrefixDiv.tinyscrollbar_update();
        }else{
            element.parent().find(&#x27;input&#x27;).val(&quot;&quot;);
        }
    },

    &#x2F;**
     * This method discards the new query parameters
     * @method discardConfig
     *&#x2F;
    discardConfig:function(){
        this.closeFlag();
        this.render();
    },

    &#x2F;**
     * This method applies the new query parameters
     * @method updateConfig
     *&#x2F;
    updateConfig:function(){
        if (!this.environment.params.preventNewQueries==false){
            this.discardConfig();
            return;
        }
        var internalParams, rrcSelected, $this, externalParams;
        if (this.validateAll()==true){
            $this = this;
            this.prefixes = new Array();
            this.dom.find(&quot;.bgplayControlPrefixValue input[type=text]&quot;).each(function(){
                $this.prefixes.push($(this).val());
            });

            rrcSelected=[];
            this.dom.find(&#x27;input[name=bgplayRrcSelect]:checked&#x27;).each(function(){
                rrcSelected.push($(this).val());
            });

            this.ignoreReannouncements = this.suppressReannounce.is(&#x27;:checked&#x27;);

            if (this.environment.thisWidget!=null){
                internalParams={};

                if (this.showResourceController) internalParams.targets = arrayToString(this.prefixes);
                internalParams.starttimestamp = Math.round(this.starttimestampPicker.datetimepicker(&quot;getDate&quot;).getTime()&#x2F;1000) - ((new Date()).getTimezoneOffset()*60);&#x2F;&#x2F;Math.round(dateToUTC(this.starttimestampPicker.datetimepicker(&quot;getDate&quot;).getTime()&#x2F;1000).getTime()&#x2F;1000);
                internalParams.endtimestamp = Math.round(this.endtimestampPicker.datetimepicker(&quot;getDate&quot;).getTime()&#x2F;1000) - ((new Date()).getTimezoneOffset()*60);
                internalParams.ignoreReannouncements = this.ignoreReannouncements;
                internalParams.selectedRrcs = arrayToString(rrcSelected);
                internalParams.instant = null; &#x2F;&#x2F;the new query will start from the initial instant

                externalParams = this.environment.jsonWrap.setParams(internalParams);

                if (!areMapsEquals(internalParams, this.environment.params, this.environment.dynamicParams)){
                    this.environment.oldParams = this.environment.params;
                    this.environment.thisWidget.navigate(externalParams);
                    &#x2F;&#x2F;this.closeFlag(); &#x2F;&#x2F;If the widget was not updated then the query parameters are the same, close the flag
                    this.eventAggregator.trigger(&quot;destroyAll&quot;);
                }else{
                    this.discardConfig();
                }
            }
        }
    }

});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
